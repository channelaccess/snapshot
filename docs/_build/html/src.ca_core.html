<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>src.ca_core package &mdash; snapshot 1.5 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="snapshot 1.5 documentation" href="index.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="src-ca-core-package">
<h1>src.ca_core package<a class="headerlink" href="#src-ca-core-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-src.ca_core.snapshot_ca">
<span id="src-ca-core-snapshot-ca-module"></span><h2>src.ca_core.snapshot_ca module<a class="headerlink" href="#module-src.ca_core.snapshot_ca" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="src.ca_core.snapshot_ca.ActionStatus">
<em class="property">class </em><code class="descclassname">src.ca_core.snapshot_ca.</code><code class="descname">ActionStatus</code><a class="headerlink" href="#src.ca_core.snapshot_ca.ActionStatus" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">enum.Enum</span></code></p>
<dl class="docutils">
<dt>Returned by Snapshot methods to indicate their stressfulness. Possible states:</dt>
<dd>busy: Returned by restore_pvs() if previous restore did not finished yet (non-blocking restore).
ok: Action succeeded.
no_data: Returned by restore_pvs() if no data was provided for restore.
no_conn: Returned if one of the PVs is not connected and not in force mode.
timeout: Returned by restore_pvs_blocking() when timeout occurs before all PVs are restored.</dd>
</dl>
<dl class="attribute">
<dt id="src.ca_core.snapshot_ca.ActionStatus.busy">
<code class="descname">busy</code><em class="property"> = &lt;ActionStatus.busy: 0&gt;</em><a class="headerlink" href="#src.ca_core.snapshot_ca.ActionStatus.busy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="src.ca_core.snapshot_ca.ActionStatus.no_conn">
<code class="descname">no_conn</code><em class="property"> = &lt;ActionStatus.no_conn: 3&gt;</em><a class="headerlink" href="#src.ca_core.snapshot_ca.ActionStatus.no_conn" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="src.ca_core.snapshot_ca.ActionStatus.no_data">
<code class="descname">no_data</code><em class="property"> = &lt;ActionStatus.no_data: 2&gt;</em><a class="headerlink" href="#src.ca_core.snapshot_ca.ActionStatus.no_data" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="src.ca_core.snapshot_ca.ActionStatus.ok">
<code class="descname">ok</code><em class="property"> = &lt;ActionStatus.ok: 1&gt;</em><a class="headerlink" href="#src.ca_core.snapshot_ca.ActionStatus.ok" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="src.ca_core.snapshot_ca.ActionStatus.timeout">
<code class="descname">timeout</code><em class="property"> = &lt;ActionStatus.timeout: 4&gt;</em><a class="headerlink" href="#src.ca_core.snapshot_ca.ActionStatus.timeout" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="exception">
<dt id="src.ca_core.snapshot_ca.MacroError">
<em class="property">exception </em><code class="descclassname">src.ca_core.snapshot_ca.</code><code class="descname">MacroError</code><a class="headerlink" href="#src.ca_core.snapshot_ca.MacroError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#src.ca_core.snapshot_ca.SnapshotError" title="src.ca_core.snapshot_ca.SnapshotError"><code class="xref py py-class docutils literal"><span class="pre">src.ca_core.snapshot_ca.SnapshotError</span></code></a></p>
<p>Problems parsing macros (wrong syntax).</p>
</dd></dl>

<dl class="class">
<dt id="src.ca_core.snapshot_ca.PvStatus">
<em class="property">class </em><code class="descclassname">src.ca_core.snapshot_ca.</code><code class="descname">PvStatus</code><a class="headerlink" href="#src.ca_core.snapshot_ca.PvStatus" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">enum.Enum</span></code></p>
<dl class="docutils">
<dt>Returned by SnapshotPv on save_pv() and restore_pv() methods. Possible states:</dt>
<dd>access_err: Not connected or not read/write permission at the time of action.
ok: Action succeeded.
no_value: Returned if value (save_pv) or desired value (restore_pv) for action is not defined.
equal: Returned if restore value is equal to current PV value (no need to restore).</dd>
</dl>
<dl class="attribute">
<dt id="src.ca_core.snapshot_ca.PvStatus.access_err">
<code class="descname">access_err</code><em class="property"> = &lt;PvStatus.access_err: 0&gt;</em><a class="headerlink" href="#src.ca_core.snapshot_ca.PvStatus.access_err" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="src.ca_core.snapshot_ca.PvStatus.equal">
<code class="descname">equal</code><em class="property"> = &lt;PvStatus.equal: 3&gt;</em><a class="headerlink" href="#src.ca_core.snapshot_ca.PvStatus.equal" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="src.ca_core.snapshot_ca.PvStatus.no_value">
<code class="descname">no_value</code><em class="property"> = &lt;PvStatus.no_value: 2&gt;</em><a class="headerlink" href="#src.ca_core.snapshot_ca.PvStatus.no_value" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="src.ca_core.snapshot_ca.PvStatus.ok">
<code class="descname">ok</code><em class="property"> = &lt;PvStatus.ok: 1&gt;</em><a class="headerlink" href="#src.ca_core.snapshot_ca.PvStatus.ok" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="exception">
<dt id="src.ca_core.snapshot_ca.ReqFileFormatError">
<em class="property">exception </em><code class="descclassname">src.ca_core.snapshot_ca.</code><code class="descname">ReqFileFormatError</code><a class="headerlink" href="#src.ca_core.snapshot_ca.ReqFileFormatError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#src.ca_core.snapshot_ca.ReqParseError" title="src.ca_core.snapshot_ca.ReqParseError"><code class="xref py py-class docutils literal"><span class="pre">src.ca_core.snapshot_ca.ReqParseError</span></code></a></p>
<p>Syntax error in request file.</p>
</dd></dl>

<dl class="exception">
<dt id="src.ca_core.snapshot_ca.ReqFileInfLoopError">
<em class="property">exception </em><code class="descclassname">src.ca_core.snapshot_ca.</code><code class="descname">ReqFileInfLoopError</code><a class="headerlink" href="#src.ca_core.snapshot_ca.ReqFileInfLoopError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#src.ca_core.snapshot_ca.ReqParseError" title="src.ca_core.snapshot_ca.ReqParseError"><code class="xref py py-class docutils literal"><span class="pre">src.ca_core.snapshot_ca.ReqParseError</span></code></a></p>
<p>If request file is calling one of its ancestors.</p>
</dd></dl>

<dl class="exception">
<dt id="src.ca_core.snapshot_ca.ReqParseError">
<em class="property">exception </em><code class="descclassname">src.ca_core.snapshot_ca.</code><code class="descname">ReqParseError</code><a class="headerlink" href="#src.ca_core.snapshot_ca.ReqParseError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#src.ca_core.snapshot_ca.SnapshotError" title="src.ca_core.snapshot_ca.SnapshotError"><code class="xref py py-class docutils literal"><span class="pre">src.ca_core.snapshot_ca.SnapshotError</span></code></a></p>
<p>Parent exception class for exceptions that can happen while parsing a request file.</p>
</dd></dl>

<dl class="class">
<dt id="src.ca_core.snapshot_ca.Snapshot">
<em class="property">class </em><code class="descclassname">src.ca_core.snapshot_ca.</code><code class="descname">Snapshot</code><span class="sig-paren">(</span><em>req_file_path</em>, <em>macros=None</em><span class="sig-paren">)</span><a class="headerlink" href="#src.ca_core.snapshot_ca.Snapshot" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="src.ca_core.snapshot_ca.Snapshot.add_pvs">
<code class="descname">add_pvs</code><span class="sig-paren">(</span><em>pv_list</em><span class="sig-paren">)</span><a class="headerlink" href="#src.ca_core.snapshot_ca.Snapshot.add_pvs" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates SnapshotPv objects for each PV in list.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pv_list</strong> &#8211; List of PV names.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="src.ca_core.snapshot_ca.Snapshot.change_macros">
<code class="descname">change_macros</code><span class="sig-paren">(</span><em>macros=None</em><span class="sig-paren">)</span><a class="headerlink" href="#src.ca_core.snapshot_ca.Snapshot.change_macros" title="Permalink to this definition">¶</a></dt>
<dd><p>Check existing PVs if they have macros in their &#8220;raw name&#8221;. If macros to be replaced remove existing PVs and
create new PVs.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>macros</strong> &#8211; Dictionary of macros {&#8216;macro&#8217;: &#8216;value&#8217; }</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="src.ca_core.snapshot_ca.Snapshot.clear_pvs">
<code class="descname">clear_pvs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#src.ca_core.snapshot_ca.Snapshot.clear_pvs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="src.ca_core.snapshot_ca.Snapshot.get_disconnected_pvs_names">
<code class="descname">get_disconnected_pvs_names</code><span class="sig-paren">(</span><em>selected=None</em><span class="sig-paren">)</span><a class="headerlink" href="#src.ca_core.snapshot_ca.Snapshot.get_disconnected_pvs_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Get list off all currently disconnected PVs from all snapshot PVs (default) or from list of &#8220;selected&#8221; PVs.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>selected</strong> &#8211; List of PVs to check.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">List of not connected PV names.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="src.ca_core.snapshot_ca.Snapshot.get_pvs_names">
<code class="descname">get_pvs_names</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#src.ca_core.snapshot_ca.Snapshot.get_pvs_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Get list of SnapshotPvs</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">List of SnapshotPvs.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="src.ca_core.snapshot_ca.Snapshot.parse_from_save_file">
<em class="property">static </em><code class="descname">parse_from_save_file</code><span class="sig-paren">(</span><em>save_file_path</em><span class="sig-paren">)</span><a class="headerlink" href="#src.ca_core.snapshot_ca.Snapshot.parse_from_save_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses save file to dict {&#8216;pvname&#8217;: {&#8216;data&#8217;: {&#8216;value&#8217;: &lt;value&gt;, &#8216;raw_name&#8217;: &lt;name_with_macros&gt;}}}</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>save_file_path</strong> &#8211; Path to save file.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">(saved_pvs, meta_data, err)<p>saved_pvs: in format {&#8216;pvname&#8217;: {&#8216;data&#8217;: {&#8216;value&#8217;: &lt;value&gt;, &#8216;raw_name&#8217;: &lt;name_with_macros&gt;}}}</p>
<p>meta_data: as dictionary</p>
<p>err: list of strings (each entry one error)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="src.ca_core.snapshot_ca.Snapshot.parse_to_save_file">
<code class="descname">parse_to_save_file</code><span class="sig-paren">(</span><em>pvs</em>, <em>save_file_path</em>, <em>macros=None</em>, <em>symlink_path=None</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#src.ca_core.snapshot_ca.Snapshot.parse_to_save_file" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is called at each save of PV values. This is a parser which generates save file from pvs. All
parameters in <a href="#id1"><span class="problematic" id="id2">**</span></a>kw are packed as meta data</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pvs</strong> &#8211; Dict with pvs data to be saved. pvs = {pvname: {&#8216;value&#8217;: value}}</li>
<li><strong>save_file_path</strong> &#8211; Path of the saved file.</li>
<li><strong>symlink_path</strong> &#8211; Optional path to the symlink to be created.</li>
<li><strong>kw</strong> &#8211; Additional meta data.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="src.ca_core.snapshot_ca.Snapshot.remove_pvs">
<code class="descname">remove_pvs</code><span class="sig-paren">(</span><em>pv_list</em><span class="sig-paren">)</span><a class="headerlink" href="#src.ca_core.snapshot_ca.Snapshot.remove_pvs" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove all SnapshotPv objects for PVs in list.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pv_list</strong> &#8211; List of PV names.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="src.ca_core.snapshot_ca.Snapshot.replace_metadata">
<code class="descname">replace_metadata</code><span class="sig-paren">(</span><em>save_file_path</em>, <em>metadata</em><span class="sig-paren">)</span><a class="headerlink" href="#src.ca_core.snapshot_ca.Snapshot.replace_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Reopen save data and replace meta data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>save_file_path</strong> &#8211; Path to save file.</li>
<li><strong>metadata</strong> &#8211; Dict with new metadata.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="src.ca_core.snapshot_ca.Snapshot.restore_pvs">
<code class="descname">restore_pvs</code><span class="sig-paren">(</span><em>pvs_raw</em>, <em>force=False</em>, <em>callback=None</em>, <em>custom_macros=None</em><span class="sig-paren">)</span><a class="headerlink" href="#src.ca_core.snapshot_ca.Snapshot.restore_pvs" title="Permalink to this definition">¶</a></dt>
<dd><p>Restore PVs form snapshot file or dictionary. If restore is successfully started (ActionStatus.ok returned),
then restore stressfulness will be returned in callback as: status={&#8216;pvname&#8217;: PvStatus}, forced=was_restore?</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pvs_raw</strong> &#8211; Can be a dict of {&#8216;pvname&#8217;: &#8216;saved value&#8217;} or a path to a .snap file</li>
<li><strong>force</strong> &#8211; Force restore if not all needed PVs are connected?</li>
<li><strong>callback</strong> &#8211; Callback which will be called when all PVs are restored.</li>
<li><strong>custom_macros</strong> &#8211; This macros are used only if there is no self.macros and not a .snap file.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>(action_status, pvs_status)</p>
<p>action_status: Status of action as ActionStatus type.</p>
<dl class="docutils">
<dt>pvs_status: Dict of {&#8216;pvname&#8217;: PvStatus}. Has meaningful content only in case of action_status == no_conn.</dt>
<dd><p class="first last">In other cases, pvs_status is returned in callback.</p>
</dd>
</dl>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="src.ca_core.snapshot_ca.Snapshot.restore_pvs_blocking">
<code class="descname">restore_pvs_blocking</code><span class="sig-paren">(</span><em>pvs_raw=None</em>, <em>force=False</em>, <em>timeout=10</em>, <em>custom_macros=None</em><span class="sig-paren">)</span><a class="headerlink" href="#src.ca_core.snapshot_ca.Snapshot.restore_pvs_blocking" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar as restore_pvs, but block until restore finished or timeout.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pvs_raw</strong> &#8211; Can be a dict of {&#8216;pvname&#8217;: &#8216;saved value&#8217;} or a path to a .snap file</li>
<li><strong>force</strong> &#8211; Force restore if not all needed PVs are connected?</li>
<li><strong>callback</strong> &#8211; Callback which will be called when all PVs are restored.</li>
<li><strong>custom_macros</strong> &#8211; This macros are used only if there is no self.macros and not a .snap file.</li>
<li><strong>timeout</strong> &#8211; Timeout in seconds.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>(action_status, pvs_status)</p>
<p>action_status: Status of action as ActionStatus type.</p>
<p>pvs_status: Dict of {&#8216;pvname&#8217;: PvStatus}.</p>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="src.ca_core.snapshot_ca.Snapshot.save_pvs">
<code class="descname">save_pvs</code><span class="sig-paren">(</span><em>save_file_path</em>, <em>force=False</em>, <em>symlink_path=None</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#src.ca_core.snapshot_ca.Snapshot.save_pvs" title="Permalink to this definition">¶</a></dt>
<dd><p>Get current PV values and save them in file. can also create symlink to the file. If additional metadata should
be saved, it can be provided as keyword arguments.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>save_file_path</strong> &#8211; Path to save file.</li>
<li><strong>force</strong> &#8211; Save if not all PVs connected? Not connected PVs values will not be saved in such case.</li>
<li><strong>symlink_path</strong> &#8211; Path to symlink. If symlink exists it will be replaced.</li>
<li><strong>kw</strong> &#8211; Will be appended to metadata.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>(action_status, pvs_status)</p>
<p>action_status: Status of action as ActionStatus type.</p>
<p>pvs_status:</p>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="exception">
<dt id="src.ca_core.snapshot_ca.SnapshotError">
<em class="property">exception </em><code class="descclassname">src.ca_core.snapshot_ca.</code><code class="descname">SnapshotError</code><a class="headerlink" href="#src.ca_core.snapshot_ca.SnapshotError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">Exception</span></code></p>
<p>Parent exception class of all snapshot exceptions.</p>
</dd></dl>

<dl class="class">
<dt id="src.ca_core.snapshot_ca.SnapshotPv">
<em class="property">class </em><code class="descclassname">src.ca_core.snapshot_ca.</code><code class="descname">SnapshotPv</code><span class="sig-paren">(</span><em>pvname</em>, <em>macros=None</em>, <em>connection_callback=None</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#src.ca_core.snapshot_ca.SnapshotPv" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">epics.pv.PV</span></code></p>
<p>Extended PV class with non-blocking methods to save and restore pvs.</p>
<dl class="method">
<dt id="src.ca_core.snapshot_ca.SnapshotPv.add_conn_callback">
<code class="descname">add_conn_callback</code><span class="sig-paren">(</span><em>callback</em><span class="sig-paren">)</span><a class="headerlink" href="#src.ca_core.snapshot_ca.SnapshotPv.add_conn_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Set connection callback.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Connection callback index</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="src.ca_core.snapshot_ca.SnapshotPv.clear_callbacks">
<code class="descname">clear_callbacks</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#src.ca_core.snapshot_ca.SnapshotPv.clear_callbacks" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes all user callbacks and connection callbacks.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="src.ca_core.snapshot_ca.SnapshotPv.compare">
<em class="property">static </em><code class="descname">compare</code><span class="sig-paren">(</span><em>value1</em>, <em>value2</em>, <em>is_array=False</em><span class="sig-paren">)</span><a class="headerlink" href="#src.ca_core.snapshot_ca.SnapshotPv.compare" title="Permalink to this definition">¶</a></dt>
<dd><p>Compare two values snapshot style (handling numpy arrays) for waveforms.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>value1</strong> &#8211; Value to be compared to value2.</li>
<li><strong>value2</strong> &#8211; Value to be compared to value1.</li>
<li><strong>is_array</strong> &#8211; Are values to be compared arrays?</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Result of comparison.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="src.ca_core.snapshot_ca.SnapshotPv.compare_to_curr">
<code class="descname">compare_to_curr</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#src.ca_core.snapshot_ca.SnapshotPv.compare_to_curr" title="Permalink to this definition">¶</a></dt>
<dd><p>Compare value to current PV value.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>value</strong> &#8211; Value to be compared.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Result of comparison.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="src.ca_core.snapshot_ca.SnapshotPv.macros_substitution">
<em class="property">static </em><code class="descname">macros_substitution</code><span class="sig-paren">(</span><em>txt: str</em>, <em>macros: dict</em><span class="sig-paren">)</span><a class="headerlink" href="#src.ca_core.snapshot_ca.SnapshotPv.macros_substitution" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns string txt with substituted macros (defined as {macro: value}).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>txt</strong> &#8211; String with macros.</li>
<li><strong>macros</strong> &#8211; Dictionary with {macro: value} pairs.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">txt with replaced macros.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="src.ca_core.snapshot_ca.SnapshotPv.remove_conn_callback">
<code class="descname">remove_conn_callback</code><span class="sig-paren">(</span><em>idx</em><span class="sig-paren">)</span><a class="headerlink" href="#src.ca_core.snapshot_ca.SnapshotPv.remove_conn_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove connection callback.
:return:</p>
</dd></dl>

<dl class="method">
<dt id="src.ca_core.snapshot_ca.SnapshotPv.restore_pv">
<code class="descname">restore_pv</code><span class="sig-paren">(</span><em>value</em>, <em>callback=None</em><span class="sig-paren">)</span><a class="headerlink" href="#src.ca_core.snapshot_ca.SnapshotPv.restore_pv" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes asynchronous CA put if value is different to current PV value. Success status of this action is
returned in callback.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>value</strong> &#8211; Value to be put to PV.</li>
<li><strong>callback</strong> &#8211; callback function in which success of restoring is monitored</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="src.ca_core.snapshot_ca.SnapshotPv.save_pv">
<code class="descname">save_pv</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#src.ca_core.snapshot_ca.SnapshotPv.save_pv" title="Permalink to this definition">¶</a></dt>
<dd><p>Non blocking CA get. Does not block if there is no connection or no read access. Returns latest value
(monitored) or None if not able to get value. It also returns status of the action (see PvStatus)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">(value, status)<p>value: PV value.</p>
<p>status: Status of save action as PvStatus type.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="src.ca_core.snapshot_ca.SnapshotPv.value_as_str">
<code class="descname">value_as_str</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#src.ca_core.snapshot_ca.SnapshotPv.value_as_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Get current PV value as snapshot style string (handling of array same way as for restore)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">String representation of current PV value.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="src.ca_core.snapshot_ca.SnapshotPv.value_to_str">
<em class="property">static </em><code class="descname">value_to_str</code><span class="sig-paren">(</span><em>value: str</em>, <em>is_array: bool</em><span class="sig-paren">)</span><a class="headerlink" href="#src.ca_core.snapshot_ca.SnapshotPv.value_to_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Get snapshot style string representation of provided value.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>value</strong> &#8211; Value to be represented as string.</li>
<li><strong>is_array</strong> &#8211; Should be treated as an array.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">String representation of value</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="src.ca_core.snapshot_ca.SnapshotReqFile">
<em class="property">class </em><code class="descclassname">src.ca_core.snapshot_ca.</code><code class="descname">SnapshotReqFile</code><span class="sig-paren">(</span><em>path: str</em>, <em>parent=None</em>, <em>macros: dict=None</em>, <em>changeable_macros: list=None</em><span class="sig-paren">)</span><a class="headerlink" href="#src.ca_core.snapshot_ca.SnapshotReqFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="src.ca_core.snapshot_ca.SnapshotReqFile.read">
<code class="descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#src.ca_core.snapshot_ca.SnapshotReqFile.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse request file and return list of pv names where changeable_macros are not replaced. (&#8220;raw&#8221; pv names).
In case of problems raises exceptions.</p>
<blockquote>
<div><dl class="docutils">
<dt>ReqParseError</dt>
<dd>ReqFileFormatError
ReqFileInfLoopError</dd>
</dl>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">List of PV names.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="src.ca_core.snapshot_ca.parse_dict_macros_to_text">
<code class="descclassname">src.ca_core.snapshot_ca.</code><code class="descname">parse_dict_macros_to_text</code><span class="sig-paren">(</span><em>macros</em><span class="sig-paren">)</span><a class="headerlink" href="#src.ca_core.snapshot_ca.parse_dict_macros_to_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Converting dict() separated macros string to comma separated.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>macros</strong> &#8211; dict of macros, substitutions</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">macro string</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="src.ca_core.snapshot_ca.parse_macros">
<code class="descclassname">src.ca_core.snapshot_ca.</code><code class="descname">parse_macros</code><span class="sig-paren">(</span><em>macros_str</em><span class="sig-paren">)</span><a class="headerlink" href="#src.ca_core.snapshot_ca.parse_macros" title="Permalink to this definition">¶</a></dt>
<dd><p>Converting comma separated macros string to dictionary.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>macros_str</strong> &#8211; string of macros in style SYS=TST,D=A</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">dict of macros</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-src.ca_core">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-src.ca_core" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">src.ca_core package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-src.ca_core.snapshot_ca">src.ca_core.snapshot_ca module</a></li>
<li><a class="reference internal" href="#module-src.ca_core">Module contents</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/src.ca_core.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Rok Vintar.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
      |
      <a href="_sources/src.ca_core.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>